<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Responsive Admin Dashboard Template">
<meta name="keywords" content="admin,dashboard">
<meta name="author" content="stacks">
<!-- The above 6 meta tags *must* come first in the head;any other head content must come *after* these tags --><!-- Title -->
<title>检察员-文件审核</title>
{% load static %}
<!-- Styles -->
<link href="https://fonts.googleapis.com/css?family=Poppins:400,500,700,800&display=swap" rel="stylesheet">
<link href="/statics/assets_tech/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="/statics/assets_tech/plugins/font-awesome/css/all.min.css" rel="stylesheet">
  <link href="/statics/assets_tech/plugins/treejs/themes/default/style.css" rel="stylesheet">
<link href="/statics/assets_tech/plugins/perfectscroll/perfect-scrollbar.css" rel="stylesheet">
<!-- Theme Styles -->
<link href="/statics/assets_tech/css/main.min.css" rel="stylesheet">
<link href="/statics/assets_tech/css/custom.css" rel="stylesheet">
<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --><!-- WARNING:Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body>
<div class='loader'>
  <div class='spinner-grow text-primary' role='status'> <span class='sr-only'>Loading...</span></div>
</div>
<div class="page-container">
  <div class="page-header">
    <nav class="navbar navbar-expand-lg d-flex justify-content-between">
      <div class="" id="navbarNav">
        <ul class="navbar-nav" id="leftNav">
          <li class="nav-item"><a class="nav-link" id="sidebar-toggle" href="#"><i data-feather="arrow-left"></i></a></li>
          <li class="nav-item"><a class="nav-link" href="/stutask/">主页</a></li>
           <li class="nav-item"><a class="nav-link" href="/userset/">设置</a></li>
          <li class="nav-item"><a class="nav-link" href="/index/">切换账号</a></li>
        </ul>
      </div>
      <div class="logo"><a class="navbar-brand" href="index.html"></a></div>
      <div class="" id="headerNav">
        <ul class="navbar-nav">
          <li class="nav-item dropdown"><a class="nav-link search-dropdown" href="#" id="searchDropDown" role="button" data-bs-toggle="dropdown" aria-expanded="false"><i data-feather="search"></i></a>
            <div class="dropdown-menu dropdown-menu-end dropdown-lg search-drop-menu" aria-labelledby="searchDropDown">
              <form>
                <input class="form-control" type="text" placeholder="Type something.." aria-label="Search">
              </form>
              <h6 class="dropdown-header">Recent Searches</h6>
              <a class="dropdown-item" href="#">charts</a><a class="dropdown-item" href="#">new orders</a><a class="dropdown-item" href="#">file manager</a><a class="dropdown-item" href="#">new users</a></div>
          </li>
          <li class="nav-item dropdown"><a class="nav-link notifications-dropdown" href="#" id="notificationsDropDown" role="button" data-bs-toggle="dropdown" aria-expanded="false">3</a>
            <div class="dropdown-menu dropdown-menu-end notif-drop-menu" aria-labelledby="notificationsDropDown">
              <h6 class="dropdown-header">通知</h6>
              <a href="#">
              <div class="header-notif">
                <div class="notif-image"><span class="notification-badge bg-info text-white"><i class="fas fa-bullhorn"></i></span></div>
                <div class="notif-text">
                  <p class="bold-notif-text">faucibus dolor in commodo lectus mattis</p>
                  <small>19:00</small></div>
              </div>
              </a><a href="#">
              <div class="header-notif">
                <div class="notif-image"><span class="notification-badge bg-primary text-white"><i class="fas fa-bolt"></i></span></div>
                <div class="notif-text">
                  <p class="bold-notif-text">faucibus dolor in commodo lectus mattis</p>
                  <small>18:00</small></div>
              </div>
              </a><a href="#">
              <div class="header-notif">
                <div class="notif-image"><span class="notification-badge bg-success text-white"><i class="fas fa-at"></i></span></div>
                <div class="notif-text">
                  <p>faucibus dolor in commodo lectus mattis</p>
                  <small>yesterday</small></div>
              </div>
              </a><a href="#">
              <div class="header-notif">
                <div class="notif-image"><span class="notification-badge"><img src="/statics/assets_tech/images/avatars/profile-image.png" alt=""></span></div>
                <div class="notif-text">
                  <p>faucibus dolor in commodo lectus mattis</p>
                  <small>yesterday</small></div>
              </div>
              </a><a href="#">
              <div class="header-notif">
                <div class="notif-image"><span class="notification-badge"><img src="/statics/assets_tech/images/avatars/profile-image.png" alt=""></span></div>
                <div class="notif-text">
                  <p>faucibus dolor in commodo lectus mattis</p>
                  <small>yesterday</small></div>
              </div>
              </a></div>
          </li>
          <li class="nav-item dropdown"><a class="nav-link profile-dropdown" href="#" id="profileDropDown" role="button" data-bs-toggle="dropdown" aria-expanded="false"><img src="/statics/assets_tech/images/avatars/profile-image.png" alt=""></a>
            <div class="dropdown-menu dropdown-menu-end profile-drop-menu" aria-labelledby="profileDropDown">
              <a class="dropdown-item" href="#"><i data-feather="user"></i>个人简介</a>
              <a class="dropdown-item" href="#"><i data-feather="inbox"></i>消息</a>
              <a class="dropdown-item" href="#"><i data-feather="edit"></i>活动<span class="badge rounded-pill bg-success">12</span></a>
              <a class="dropdown-item" href="#"><i data-feather="check-circle"></i>任务</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#"><i data-feather="settings"></i>设置</a><a class="dropdown-item" href="#"><i data-feather="unlock"></i>锁屏</a><a class="dropdown-item" href="#"><i data-feather="log-out"></i>登出</a></div>
          </li>
        </ul>
      </div>
    </nav>
  </div>
  <div class="page-sidebar">
    <ul class="list-unstyled accordion-menu">
      <li class="sidebar-title">Main </li>
      <li><a href="/stutask/"><i data-feather="home"></i>主页</a></li>
      <li class="sidebar-title">Apps </li>
      <li><a href="/member_taskmanage/"><i data-feather="clipboard"></i>任务管理</a></li>
      <li class="active-page"><a href="/check_file/"><i data-feather="clipboard"></i>文件审核</a></li>
      <li><a href="/calendar_check/"><i data-feather="calendar"></i>日历查看</a></li>
        <li><a ><i data-feather="archive"></i>学习评价<i class="fas fa-chevron-right dropdown-icon"></i></a>
         <ul class="">
           <li><a href="/stu_eva/"><i class="far fa-circle"></i>学生自评</a></li>
           <li><a href="/group_eva/"><i class="far fa-circle"></i>小组评价</a></li>
           <li><a href="/diff_eva/"><i class="far fa-circle"></i>组间互评</a></li>
           <li><a href="/mem_eva/"><i class="far fa-circle"></i>成员互评</a></li>
        </ul>
      </li>
      <li><a href="/stu_pj_manage/?stu_num={{stu_info.0.num}}"><i data-feather="clipboard"></i>评价管理</a></li>
      <li><a href="/chat/{{stu_info.0.group_id}}"><i data-feather="clipboard"></i>讨论区</a></li>
    </ul>>
   </div>
  <div class="page-content">
    <div class="main-wrapper">
    <div class="row">
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h4 class="card-title">待审核文件展示</h4>
              <div>
               {% csrf_token %}
                      <table id="zero-conf" class="display" style="width:100%;table-layout:fixed;" >
                          <thead>
                             <tr>
                                 <th scope="col">#</th>
                                <th>任务编号</th>
                                 <th>发布者</th>
                                 <th>上传内容</th>
                                <th>文件上传时间</th>
                                <th>文档备注</th>
                                <th>上传类型</th>
                                <th>待审核文件类型</th>
                                <th>##</th>
                                <th>##</th>
                              </tr>
                          </thead>
                         <tbody >
                         {%  for row in doc_info %}
                          <tr>
                              <th scope="row">{{ row.id }}</th>
                          <td>{{ row.task_id }}</td>
                              <td>{{ row.publisher }}</td>
                              <td style="white-space:nowrap;  overflow:hidden;text-overflow: ellipsis;">{{ row.file_content | truncatewords:"10" }}</td>
                          <td>{{ row.filepub_time }}</td>
                          <td >{{ row.task_remark }}</td>
                            {% if row.submit_type == "1" %}
                            <td value="{{ row.submit_type }}">文本</td>
                            {% else %}
                            <td value="{{ row.submit_type }}">文件</td>
                             {% endif %}
                              <td>{{ row.file_type }}</td>
                             {% if row.file_type  == '无' %}
                              <td>
                                 <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#filedetail" onclick="showfiledetail({{ row.id }})">点击查看</button>
                              </td>

                              <td>
                                  <button type="button" class="btn btn-danger" onclick="reviewpass({{ row.id }})">审核通过</button>
                              </td>
                              {% else %}
                                <td>
                                  <a type="button" class="btn btn-warning" href="/readfile/?file_id={{row.id}}">下载查看</a>
                                </td>
                              <td>
                                  <button type="button" class="btn btn-danger" onclick="reviewpass({{ row.id }})">审核通过</button>
                              </td>
                             {% endif %}
                          </tr>
                        {% endfor %}
                     </tbody>
                      </table>
              </div>
                <!-- Modal-查看已添加文件 -->
              <div class="modal fade" id="checkfile" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div style="width:200%" class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="checkfileLabel">待审核任务</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                       {% csrf_token %}
                      <table style="  table-layout:fixed;  "
                              id= "showsubmits"class="table">
                          <thead>
                             <tr>
                                <th>上传内容</th>
                                <th style="width:200px;">上传时间</th>
                                <th>文档备注</th>
                                <th>上传类型</th>
                                <th>文件类型</th>
                                <th>##</th>
                              </tr>
                          </thead>
                         <tbody id="submitdata" name="submitdata">


                         </tbody>
                      </table>
             、
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    </div>
                    </div>

                  </div>
                </div>
              </div>
               <!-- Modal-预览文件 -->
              <div class="modal fade" id="filedetail" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div  class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="filedetailLabel">待审核内容</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                       {% csrf_token %}
                      <textarea style="height:200px;" id="text_content" name="text_content" class="form-control" aria-label="With textarea" readonly="True"></textarea>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                    </div>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

  </div>
</div>
</div>
<!-- Javascripts -->
<script src="/statics/assets_tech/plugins/jquery/jquery-3.4.1.min.js"></script>
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="/statics/assets_tech/plugins/bootstrap/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/feather-icons"></script>
<script src="/statics/assets_tech/plugins/perfectscroll/perfect-scrollbar.min.js"></script>
<script src="/statics/assets_tech/plugins/apexcharts/apexcharts.min.js"></script>
<script src="/statics/assets_tech/plugins/treejs/jstree.min.js"></script>
<script src="/statics/assets_tech/plugins/DataTables/datatables.min.js"></script>
<script src="/statics/assets_tech/js/pages/datatables.js"></script>
<script src="/statics/assets_tech/js/main.min.js"></script>
<script src="/statics/assets_tech/js/pages/dashboard.js"></script>
<script src="/statics/assets_tech/js/pages/tree.js"></script>
<script src="/statics/techinit/leader.js"></script>
</body>
</html>
